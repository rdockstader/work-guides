<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>eCourt Tomcat Install</title>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">
		<link rel="stylesheet" href="/training/shared/css/animate.css">
		<link rel="stylesheet" href="../../../shared/css/style.css">
	</head>
	<body>
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
			<a class="navbar-brand" href="/">SATools</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item">
						<a class="nav-link" href="/training/JustWare/">JustWare</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="/training/eCourt/">eCourt</a>
					</li>
					<li class="nav-item">
						<a href="/training/processes/" class="nav-link">Processes</a>
					</li>
				</ul>
			</div>
		</nav>
		<div class="jumbotron jumbotron-fluid">
			<div class="container"><h1>Installing eCourt on Tomcat on a Windows Server</h1>
				<p class="lead">How to install ecourt and tomcat on a Windows Server</p>
			</div>
		</div>
		<section class="container">
			<div class="row mb-3">
				<div class="col-12">
					<ol>
						<li class="pb-5">
							<p>
								Create a folder with your initials in the eCourt Installs Directory (E:\Ecourt Homes) on the Web server
								if one doesn't already exist.
							</p>
							<img src="img/1_create_initials_folder.png" alt="Create Folders" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>
								Create a folder with the agency name, or test name, in that directory.
							</p>
							<img src="img/2_agency_folder.png" alt="Agency Folder" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>Within that folder, create another folder called “ecourt”</p>
							<img src="img/3_ecourt_folder.png" alt="ecourt folder" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>Create a file called “cmsuser.properties” in the ecourt directory</p>
							<img src="img/4_cmsuser_file_create.png" alt="cms user file" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>Open the cmsuser.properties file in notepad++ (or notepad) and add the following lines:</p>
							<p>
								db.url=jdbc:jtds:sqlserver://<span class="important">ServerName</span>:1433;databaseName=<span class="important">DatabaseName</span>;sendStringParametersAsUnicode=false;maxStatements=2147483647
								<br>
								db.user=ecourt
								<br>
								db.password=dbpass
								db.schema=ecourt
							</p>
							<p>
								Replacing <span class="important">ServerName</span> and <span class="important">DatabaseName</span> with the name of the server (typically zombie) and the name of the database on that server.
							</p>
							<p>
								<strong>Note:</strong> If you're intalling on a customer server, the user and password may be different.
							</p>
							<p>
								<strong>Note:</strong> More information on the cmsuser.properties file will be available in the next guide.
							</p>
							<img src="img/5_cmsuser_settings.png" alt="cms user settings" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>
								Launch a Tomcat installer (version 8.5 is the best bet for current versions). You can find these by visiting the tomcat
								page, <a href="https://tomcat.apache.org/download-80.cgi#8.5.34" target="_blank">here</a>, or in E:\eCourt Install Stuff
								if you're installing on the ACDC server.
							</p>
							<p>
								<strong>Note</strong> For a windows server, you'll want to download the windows 32/64 msi installer.
							</p>
							<img src="img/6_tomcat_installer.png" alt="tomcat installer" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>Click next on the first page</p>
							<img src="img/7_tomcat_1.png" alt="tomcat page 1" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>click I Agree on the 2nd page</p>
							<img src="img/8_tomcat_2.png" alt="tomcat page 2" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>Leave the default selection the the 3rd page, and select next</p>
							<img src="img/9_tomcat_3.png" alt="tomcat page 3" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>
								Choose your next avaliable ports in your assigned range. If you're not sure what your assigned range is
								check <a href="../8-installPorts/">here</a>. If you don't have ports assigned to you, message a Solutions
								Architect to get a port range assigned to you.
							</p>
							<p>
								You should also update the Windows Service Name to be your initials + the name of the folder you created
								earlier.
							</p>
							<p>
								Once everything is updated, click next.
							</p>
							<img src="img/10_tomcat_4.png" alt="tomcat page 4" class="img-fluid mx-auto d-block rounded">
							<p>
								<strong>Note</strong> if you're unsure about what is currently in use in your port range, you can launch
								command prompt (cmd) and run the netstat -an command which will list every port currently in use.
							</p>
						</li>
						<li class="pb-5">
							<p>
								On the 5<sup>th</sup> page, change the JRE Location to the correct folder inside the JDK folder (if you're
								installing tomcat7, it will be inside the jdk1.7...\jre folder, if you're installing tomcat8 it will be
								inside the jdk1.8...\jre folder, etc.) Then hit next.
							</p>
							<p>
								<strong>Note</strong> eCourt will install with the default JRE, but will have a lot of the configuration
								and debug options disabled, since it wont be running off of the Java Development Kit (JDK)
							</p>
							<img src="img/11_tomcat_5.png" alt="tomcat page 6" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>
								on the 6<sup>th</sup> page, change the destination folder to 
								E:\Tomcat Installs\<span>Your Initials</span>\<span class="important">Install Name</span>. This path should match the
								back half of the eCourt Homes directory. I.E. for a Test instance for RD, the eCourt home is: <br>
								E:\eCourt Homes\RD\Test <br>
								and the Tomcat install directory should be: <br>
								E:\Tomcat Installs\RD\test\
							</p>
							<p>
								After changing the Destinication Folder, click Install.
							</p>
							<img src="img/12_tomcat_6.png" alt="tomcat page 7" class="img-fluid mx-auto d-block rounded">
						</li><li class="pb-5">
							<p>After the install uncheck both the Run Apache Tomcat, and Show Readme options. Then hit finish.</p>
							<img src="img/13_tomcat_7.png" alt="" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>Go to the newly installed tomcat instance at the folder you installed it in earlier. Enter the Bin folder</p>
							<img src="img/14_open_bin.png" alt="open bin" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>Run the <span class="important">AppName</span>w.exe (replacing appname with your app name > I.E. RDTestw.exe</p>
							<img src="img/15_w.exe_file.png" alt="config file" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>On the Java tab, insert the following into the java options:</p>
							<p>
								-Duser.home=E:\ecourt homes\<span class="important">Your Initials</span>\<span class="important">Install Name</span><br>
								-XX:MaxPermSize=512m<br>
								-XX:+UseCompressedOops<br>
								-Dorg.apache.jasper.runtime.BodyContentImpl.LIMIT_BUFFER=true<br>
								-DLog4jContextSelector=org.apache.logging.log4j.core.async.AsyncLoggerContextSelector<br>
							</p>
							<p>
								Replacing Your initials and Install name with your initials and the name of your install.
								I.E. E:\ecourt homes\RD\Test
							</p>
							<p>
								set the initial memory pool to 512 (1/2 a GB) and the Maximum memory pool to 2048 (2 GB).
							</p>
							<p>
								Then click OK
							</p>
							<img src="img/16_java_options.png" alt="java options" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>
								If you're restoring a database, get the version off of the ecourt.tUPgradeRecord table
								via a SQL query, in SQL Server Management Studio (SSMS). 
							</p>
							<a href="downloads/ecourtVersionQuery.sql"  class="btn btn-primary mb-3" download >Donwload Query</a>
							<img src="img/17_app_version.png" alt="app verson" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>
								Find the .war file that matches the version fromt he SQL Query on \\jove\Product_Development\eCourt\WarFiles
							</p>
							<img src="img/18_find_war_file.png" alt="find war file" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>
								copy the file to the webapps directory of your tomcat install, 
								and rename it (generally sustain is the best choice here but you can name it whatever you'd like)
							</p>
							<img src="img/19_copy_to_webapp.png" alt="copy to webapp" class="img-fluid mx-auto d-block rounded">
						</li>
						<li class="pb-5">
							<p>
								Start the service
							</p>
							<img src="img/20_start_service.png" alt="Start the ecourt service" class="img-fluid mx-auto d-block rounded">
						</li>
					</ol>
				</div>
			</div>
		</section>
		<script
		  src="https://code.jquery.com/jquery-3.3.1.min.js"
		  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
		  crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js" integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em" crossorigin="anonymous"></script>
		<script src="/training/shared/js/script.js"></script>
	</body>
</html>
